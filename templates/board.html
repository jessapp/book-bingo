{% extends 'base.html' %}
{% block content %}

<!-- To do: -->
<!-- When a book has been read, don't allow future input in that cell -->
<!-- Visualize that the cell has been read by changing color class -->
<!-- Connect input to goodreads api -->

<div id="board">
    <h1>Book Bingo!</h1>
    <table style="width:100%" border="1">
    {% for row in rows %}
        <tr>
        {% for genre in row %}
            <td> {{ genre }} 
                <form>
                {% if genre != "FREE SQUARE" %}
                    <input type="text" class="book">
                    <input type="submit" value="Submit" class="submit" id="{{ genre.lower() }}">
                </form></td>
                <div id="books-read" class="books-read"></div>
                {% endif %}
        {% endfor %}
        </tr>
    {% endfor %}
    </table>

</div>

<script type="text/javascript">
    

    // When submit is clicked, target that individual book text input
    $(function() {
      $(".submit").on("click", function(event) {
        var book = $(event.target).siblings(".book");

        var formInputs = {
            "book": book.val()
        }

        $.post("/update-board.json",
                formInputs,
                showTitle
            )
      })    
    });

        // Ajax call success function
    function showTitle(result){
        console.log(result);
        $("#books-read").html("Success!")
    }
    


</script>




{% endblock %}